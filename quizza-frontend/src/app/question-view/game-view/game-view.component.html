<div class="element-header add-border">
  <h1>Quizza</h1>
  <div
    class="element-view add-border-bottom"
    *ngIf="this.gameStateService.player"
  >
    PlayerName: {{ this.gameStateService.player.name }}
    <button (click)="logOut()">Logout</button>
  </div>
</div>

<ng-container
  *ngIf="
    this.gameStateService.gameId && !this.gameStateService.player;
    else preGameLobby
  "
>
  <div class="element-view add-border">
    <h2>Player Login</h2>
    <input type="text" placeholder="Enter your name" #playerNameInput />
    <button (click)="sendLoginRequest(playerNameInput.value)">
      Send Request
    </button>
  </div>
</ng-container>

<ng-template #preGameLobby>
  <div *ngIf="!this.gameStateService.gameId" class="element-view add-border">
    <h2>Create new Lobby</h2>
    <p>
      GameId:
      <input type="text" placeholder="Enter some GameId" #roomNameInput />
    </p>
    <p>
      Max Rounds:
      <input
        type="text"
        placeholder="Enter Round Count"
        value="3"
        #maxRoundCountInput
      />
    </p>
    <p>
      Round Time:
      <input
        type="text"
        placeholder="Enter Round Time"
        value="20"
        #maxRoundTimeInput
      />
    </p>
    <p>
      <button
        (click)="
          openNewLobby(
            roomNameInput.value,
            maxRoundCountInput.value,
            maxRoundTimeInput.value
          )
        "
      >
        Create new Lobby
      </button>
    </p>
  </div>
</ng-template>

<div *ngIf="this.gameStateService.player" class="element-view add-border">
  <!-- //TODO - Get all Players with "answeredId !== 0 => hasAnswered" and diplay little checkmark-->
  <ng-container *ngIf="getGameState$ | async as gamestate">
    <div *ngIf="gamestate.gameStatus === GameStatus.PRE_GAME">
      <app-pre-game-lobby />
    </div>

    <div
      *ngIf="
        gamestate.currentQuestion.question &&
        gamestate.gameStatus === GameStatus.IN_PROGRESS
      "
    >
      <app-main-game-lobby></app-main-game-lobby>
    </div>

    <ng-container *ngIf="gamestate.gameStatus === GameStatus.FINISHED">
      <app-after-game-lobby></app-after-game-lobby>
    </ng-container>
  </ng-container>
</div>
